<?xml version="1.0" encoding="UTF-8"?>
<con:soapui-project id="0480b755-d895-4b3e-b49b-362cc7a5a36e" activeEnvironment="Default" name="AmaTrack" resourceRoot="" soapui-version="5.4.0" abortOnError="false" runType="SEQUENTIAL" xmlns:con="http://eviware.com/soapui/config"><con:settings/><con:interface xsi:type="con:RestService" id="73e5de86-6b5c-4515-8dce-d72caf6dab47" wadlVersion="http://wadl.dev.java.net/2009/02" name="AmaTrack" type="rest" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:settings/><con:definitionCache type="TEXT" rootPart=""/><con:endpoints><con:endpoint>http://10.0.10.222/</con:endpoint></con:endpoints><con:resource name="register" path="/project/dev/e-steps/api/consumers/register" id="06fe964c-692d-437e-bfa4-920e93f36c4d"><con:settings/><con:parameters><con:parameter><con:name>title</con:name><con:value/><con:style>QUERY</con:style><con:default/><con:description xsi:nil="true"/></con:parameter><con:parameter><con:name>name</con:name><con:value/><con:style>QUERY</con:style><con:default/><con:description xsi:nil="true"/></con:parameter><con:parameter><con:name>dob</con:name><con:value/><con:style>QUERY</con:style><con:default/><con:description xsi:nil="true"/></con:parameter><con:parameter><con:name>emailAddress</con:name><con:value/><con:style>QUERY</con:style><con:default/><con:description xsi:nil="true"/></con:parameter><con:parameter><con:name>contactNumber</con:name><con:value/><con:style>QUERY</con:style><con:default/><con:description xsi:nil="true"/></con:parameter><con:parameter><con:name>password</con:name><con:value/><con:style>QUERY</con:style><con:default/><con:description xsi:nil="true"/></con:parameter><con:parameter><con:name>vanServiceFlag</con:name><con:value/><con:style>QUERY</con:style><con:default/><con:description xsi:nil="true"/></con:parameter></con:parameters><con:method name="Method 1" id="7129c0dd-96f6-429b-bc90-c70ad96f7aac" method="POST"><con:settings/><con:parameters/><con:representation type="REQUEST"><con:mediaType>application/json</con:mediaType><con:params/></con:representation><con:representation type="FAULT"><con:mediaType>application/json</con:mediaType><con:status>422</con:status><con:params/><con:element xmlns:reg="http://10.0.10.222/project/dev/e-steps/api/consumers/register">reg:Fault</con:element></con:representation><con:representation type="RESPONSE"><con:mediaType>application/json</con:mediaType><con:status>200</con:status><con:params/><con:element xmlns:reg="http://10.0.10.222/project/dev/e-steps/api/consumers/register">reg:Response</con:element></con:representation><con:request name="Request 1" id="6ff2e8a2-c8ae-4531-a810-8c12c99f81f9" mediaType="application/json" postQueryString="false"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:endpoint>http://10.0.10.222/</con:endpoint><con:request/><con:originalUri>http://10.0.10.222/project/dev/e-steps/api/consumers/register</con:originalUri><con:credentials><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:parameters>
  <con:entry key="emailAddress" value="al@yopmail.com"/>
  <con:entry key="password" value="123456"/>
  <con:entry key="dob" value="1992-05-05"/>
  <con:entry key="name" value="Allen Lancaster"/>
  <con:entry key="contactNumber" value="9858565856"/>
  <con:entry key="vanServiceFlag" value="0"/>
  <con:entry key="title" value="Mr"/>
</con:parameters><con:parameterOrder><con:entry>title</con:entry><con:entry>name</con:entry><con:entry>dob</con:entry><con:entry>emailAddress</con:entry><con:entry>contactNumber</con:entry><con:entry>password</con:entry><con:entry>vanServiceFlag</con:entry></con:parameterOrder></con:request></con:method></con:resource><con:resource name="login" path="/project/dev/e-steps/api/consumers/login" id="255cbcfa-5a97-4d5f-ab6a-aeebe8e75df3"><con:settings/><con:parameters><con:parameter><con:name>emailAddress</con:name><con:value/><con:style>QUERY</con:style><con:default/><con:description xsi:nil="true"/></con:parameter><con:parameter><con:name>password</con:name><con:value/><con:style>QUERY</con:style><con:default/><con:description xsi:nil="true"/></con:parameter><con:parameter><con:name>deviceId</con:name><con:value/><con:style>QUERY</con:style><con:default/><con:description xsi:nil="true"/></con:parameter></con:parameters><con:method name="Method 1" id="d37619e5-e13e-429b-aa23-249ad8df797d" method="POST"><con:settings/><con:parameters/><con:representation type="FAULT"><con:mediaType>text/html; charset=UTF-8</con:mediaType><con:status>405</con:status><con:params/><con:element>html</con:element></con:representation><con:representation type="FAULT"><con:mediaType>application/json</con:mediaType><con:status>422</con:status><con:params/><con:element xmlns:log="http://10.0.10.222/project/dev/e-steps/api/consumers/login">log:Fault</con:element></con:representation><con:representation type="REQUEST"><con:mediaType>application/json</con:mediaType><con:params/></con:representation><con:representation type="RESPONSE"><con:mediaType>application/json</con:mediaType><con:status>200</con:status><con:params/><con:element xmlns:log="http://10.0.10.222/project/dev/e-steps/api/consumers/login">log:Response</con:element></con:representation><con:request name="Request 1" id="a2595231-c43d-4ebf-bbab-f7a53667b9b4" mediaType="application/json" postQueryString="false"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:endpoint>http://10.0.10.222/</con:endpoint><con:request/><con:originalUri>http://10.0.10.222/project/dev/e-steps/api/consumers/login</con:originalUri><con:credentials><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:parameters>
  <con:entry key="emailAddress" value="al@yopmail.com"/>
  <con:entry key="password" value="123456"/>
  <con:entry key="deviceId" value="1"/>
</con:parameters><con:parameterOrder><con:entry>emailAddress</con:entry><con:entry>password</con:entry><con:entry>deviceId</con:entry></con:parameterOrder></con:request></con:method></con:resource><con:resource name="list" path="/project/dev/e-steps/api/routes/list" id="75892c7c-0b16-4cef-8927-7a24b25a314e"><con:settings/><con:parameters><con:parameter><con:name>Authorization</con:name><con:value/><con:style>HEADER</con:style><con:default/><con:description xsi:nil="true"/></con:parameter></con:parameters><con:method name="Method 1" id="cbaf0900-1acc-49f6-9e85-8bfe02163e5b" method="POST"><con:settings/><con:parameters/><con:representation type="FAULT"><con:mediaType>text/html; charset=UTF-8</con:mediaType><con:status>405</con:status><con:params/><con:element>html</con:element></con:representation><con:representation type="REQUEST"><con:mediaType>application/json</con:mediaType><con:params/></con:representation><con:representation type="FAULT"><con:mediaType>application/json</con:mediaType><con:status>401</con:status><con:params/><con:element xmlns:list="http://10.0.10.222/project/dev/e-steps/api/routes/list">list:Fault</con:element></con:representation><con:representation type="RESPONSE"><con:mediaType>application/json</con:mediaType><con:status>200</con:status><con:params/><con:element xmlns:list="http://10.0.10.222/project/dev/e-steps/api/routes/list">list:Response</con:element></con:representation><con:request name="Request 1" id="28bccced-6ff1-434c-8027-b990ae04e1db" mediaType="application/json" postQueryString="false"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:endpoint>http://10.0.10.222/</con:endpoint><con:request/><con:originalUri>http://10.0.10.222/project/dev/e-steps/api/routes/list</con:originalUri><con:credentials><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:parameters><entry key="Authorization" value="dU05SVhvWjl2SGNYbkxNVTdUZ0FiUGd2djR1UWJpeUNwYTZ2YnVKc3FvMTB1SEk4c1dsUVpUTVlLZmpQ" xmlns="http://eviware.com/soapui/config"/></con:parameters><con:parameterOrder><con:entry>Authorization</con:entry></con:parameterOrder></con:request></con:method></con:resource></con:interface><con:testSuite id="074fea98-f3c1-48b4-85c4-b7d7ed67825d" name="Amatrack TestSuite"><con:settings/><con:runType>SEQUENTIAL</con:runType><con:testCase id="370181e5-7089-464b-9a51-4acd788711aa" failOnError="true" failTestCaseOnErrors="true" keepSession="false" maxResults="0" name="Login" searchProperties="true"><con:settings/><con:testStep type="restrequest" name="Login1" id="f98b644a-dac3-4aaa-a4d4-f1bb977beaef"><con:settings/><con:config service="AmaTrack" resourcePath="/project/dev/e-steps/api/consumers/login" methodName="Method 1" xsi:type="con:RestRequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:restRequest name="Login1" id="a2595231-c43d-4ebf-bbab-f7a53667b9b4" mediaType="application/json" postQueryString="false"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:endpoint>http://10.0.10.222/</con:endpoint><con:request/><con:originalUri>http://10.0.10.222/project/dev/e-steps/api/consumers/login</con:originalUri><con:credentials><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:parameters>
  <con:entry key="emailAddress" value="al@yopmail.com"/>
  <con:entry key="password" value="123456"/>
  <con:entry key="deviceId" value="1"/>
</con:parameters><con:parameterOrder><con:entry>emailAddress</con:entry><con:entry>password</con:entry><con:entry>deviceId</con:entry></con:parameterOrder></con:restRequest></con:config></con:testStep><con:testStep type="groovy" name="get_api_token" id="dbeb4e3f-0823-45de-bbd5-1f4ae7caea46"><con:settings/><con:config><script>def groovyUtils=new com.eviware.soapui.support.GroovyUtils(context)
import groovy.json.*
response_as_xml = testRunner.testCase.getTestStepAt(0).testRequest.getResponseContentAsXml()
log.info testRunner.testCase.getTestStepByName("Login1").getPropertyValue("reponse")
response_as_json=testRunner.testCase.getTestStepAt(0).testRequest.getResponseContentAsString()
response=groovyUtils.getXmlHolder(response_as_xml)
project_path=groovyUtils.getProjectPath()
log.info project_path
response_1=new JsonSlurper().parseText(response_as_json)
api_token=response.getNodeValue("//ns1:api_token")
api_token_node=response_1.consumer.contactNumber
log.info "This is API token value:--" +api_token
log.info "This is Contact Number:--" +api_token_node
return api_token
</script></con:config></con:testStep><con:testStep type="transfer" name="Property Transfer" id="a60fc9dc-bb79-488a-9bad-780e32a3dfad"><con:settings/><con:config xsi:type="con:PropertyTransfersStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>api_token</con:name><con:sourceType>result</con:sourceType><con:sourceStep>get_api_token</con:sourceStep><con:targetType>api_token_value</con:targetType><con:targetStep>#TestSuite#</con:targetStep><con:upgraded>true</con:upgraded></con:transfers></con:config></con:testStep><con:properties/></con:testCase><con:testCase id="3ac17c79-a6b2-4891-91bd-3ce7073537b7" failOnError="true" failTestCaseOnErrors="true" keepSession="false" maxResults="0" name="Route List" searchProperties="true"><con:settings/><con:testStep type="restrequest" name="routes" id="57e396b4-e13e-4956-9c86-e6a532118f71"><con:settings/><con:config service="AmaTrack" resourcePath="/project/dev/e-steps/api/routes/list" methodName="Method 1" xsi:type="con:RestRequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:restRequest name="routes" id="28bccced-6ff1-434c-8027-b990ae04e1db" mediaType="application/json" postQueryString="false"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:endpoint>http://10.0.10.222/</con:endpoint><con:request/><con:originalUri>http://10.0.10.222/project/dev/e-steps/api/routes/list</con:originalUri><con:credentials><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:parameters><entry key="Authorization" value="${#TestSuite#api_token_value}" xmlns="http://eviware.com/soapui/config"/></con:parameters><con:parameterOrder><con:entry>Authorization</con:entry></con:parameterOrder></con:restRequest></con:config></con:testStep><con:properties/></con:testCase><con:properties><con:property><con:name>api_token_value</con:name><con:value>MUJKME5zSlVISDdyaUJLYzNnWlEzaFEwM2FHMXdrS1VRTU1DeUpDMkxiODF2RTBubm5NR0lFa0lDM0VQ</con:value></con:property></con:properties></con:testSuite><con:properties/><con:wssContainer/><con:oAuth2ProfileContainer/><con:oAuth1ProfileContainer/><con:sensitiveInformation/></con:soapui-project>